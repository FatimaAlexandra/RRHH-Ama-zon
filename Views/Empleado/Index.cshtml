
<div class="text-center">
<h1 class="display-4">EMPLEADOS</h1>
</div>

<main class="mt-2 container">
    <div>
        <div class="row justify-content-between">
            <div class="col-6"></div>
            <div class="col-6 text-end">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Agregar empleado
                </button>
               
                <button type="button" class="btn btn-warning" data-bs-toggle="modal" onclick="mostrarDatosSeleccionados()">
                      Generar PDF
                 </button>
                <button type="button" class="btn btn-danger" data-bs-toggle="modal">
                    <a asp-controller="Reporte" asp-action="GenerarAcuerdos">Generar Acuerdos</a>
                </button>


                
            </div>            
        </div>
        <div class="mt-3 row">
            <div class="col-6 col-md-3">
                <div class="form-group">
                    <label for="filtro_sedes">Sedes</label>
                    <select id="filtro_sedes" class="form-select form-control" aria-label="Default select example">
                        <option value="0">Todos</option>
                        @foreach (Sede sede in ViewBag.Sedes)
                        {
                            <option value="@sede.Codigosede">@sede.Nombre</option>
                        }
                    </select>
                </div>
            </div>
            </div>
        <div class="mt-3 row">
            <div class="col-12">
              <div class="table-responsive">
                <table id="tabla_empleados" class="table table-responsive table-bordered table-striped table-primary table-hover" id="contractsTable">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>OP</th>
                            <th>Tipo documento</th>
                            <th>Número de documento</th>
                            <th>Nombre</th>
                            <th>Correo</th>
                            <th>Nacimiento</th>
                            <th>Telefono</th>
                            <th>Direccion</th>
                            <td>Sede</td>
                            <td>CodigoSede</td>
                            <th>Cargo</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        @foreach (Empleado empleado in ViewBag.Empleados)
                        {
                            <tr>
                                <td>@empleado.Id</td>
                                <th><input type="checkbox" onchange="capturarDatos(this)" /></th>
                                <td>@empleado.Documento.TipoDocumento</td>
                                <td>@empleado.Documento.NumeroDocumento</td>
                                <td>@empleado.Nombre</td>
                                <td>@empleado.Correo</td>
                                <td>@empleado.FechaNacimiento</td>
                                <td>@empleado.Telefono</td>
                                <td>@empleado.Direccion</td>
                                <td>@empleado.Sede.Nombre</td>
                                <td>@empleado.Sede.Codigosede</td>
                                <td>@empleado.Contrato.Cargo</td>
                                <td></td>
                            </tr>
                        }
                    </tbody>
                    <tfoot></tfoot>
                </table>
              </div>
            </div>
        </div>

    </div>

    @*<button onclick="mostrarDatosSeleccionados()">Generar PDF</button>*@
    <script>
        var empleadosSeleccionados = [];

        function capturarDatos(checkbox) {
            if (checkbox.checked) {
                var empleadoId = checkbox.parentNode.parentNode.cells[0].innerText;
                var empleadoTipoDocumento = checkbox.parentNode.parentNode.cells[2].innerText;
                var empleadoNumeroDocumento = checkbox.parentNode.parentNode.cells[3].innerText;
                var empleadoNombre = checkbox.parentNode.parentNode.cells[4].innerText;
                var empleadoCorreo = checkbox.parentNode.parentNode.cells[5].innerText;
                var empleadoNacimiento = checkbox.parentNode.parentNode.cells[6].innerText;
                var empleadoTelefono = checkbox.parentNode.parentNode.cells[7].innerText;
                var empleadoDireccion = checkbox.parentNode.parentNode.cells[8].innerText;
                var empleadoSede = checkbox.parentNode.parentNode.cells[9].innerText;
                var empleadoCargo = checkbox.parentNode.parentNode.cells[10].innerText;

                // Captura los demás datos necesarios y añádelos a la variable empleadosSeleccionados
                empleadosSeleccionados.push({
                    empleadoId: empleadoId,
                    empleadoTipoDocumento: empleadoTipoDocumento,
                    empleadoNumeroDocumento: empleadoNumeroDocumento,
                    empleadoNombre: empleadoNombre,
                    empleadoCorreo: empleadoCorreo,
                    empleadoNacimiento: empleadoNacimiento,
                    empleadoTelefono: empleadoTelefono,
                    empleadoDireccion: empleadoDireccion,
                    empleadoSede: empleadoSede,
                    empleadoCargo: empleadoCargo
                });
            }
        }


        function mostrarDatosSeleccionados() {
            if (empleadosSeleccionados.length > 0) {
                var mensaje = "Empleados seleccionados:\n";
                empleadosSeleccionados.forEach(function (empleado) {
                    mensaje += "NOMBRE: " + empleado.empleadoNombre + "\n";
                    mensaje += "ID: " + empleado.empleadoId + "\n";
                    mensaje += "TIPO DOCUMENTO: " + empleado.empleadoTipoDocumento + "\n";
                    mensaje += "NÚMERO DOCUMENTO: " + empleado.empleadoNumeroDocumento + "\n";
                    mensaje += "CORREO: " + empleado.empleadoCorreo + "\n";
                    mensaje += "FECHA NACIMIENTO: " + empleado.empleadoNacimiento + "\n";
                    mensaje += "TELÉFONO: " + empleado.empleadoTelefono + "\n";
                    mensaje += "DIRECCIÓN: " + empleado.empleadoDireccion + "\n";
                    mensaje += "SEDE: " + empleado.empleadoSede + "\n";
                    mensaje += "CARGO: " + empleado.empleadoCargo + "\n";
                    // Agrega el resto de los datos que desees mostrar
                    mensaje += "\n";
                });
                Swal.fire({
                  title: "Empleados seleccionados",
                  text: mensaje,
                  icon: "info",
                });

                //$.ajax({
                //    url: '/Reporte/GenerarDatosEmpleado',
                //    data: {empleados: JSON.stringify(empleadosSeleccionados), esperado: "Chucho"},
                //    type: 'Post',
                //    dataType: 'json',
                //    cache: false,
                //}).done(function (resp) {
                //    console.log(resp);
                //    // Crear un objeto Blob a partir de los datos recibidos
                    
                //}).fail(function () {

                //});

                $.ajax({
                    url: '/Reporte/GenerarDatosEmpleado',
                    type: 'POST',
                    data: { empleados: JSON.stringify(empleadosSeleccionados), esperado: "Chucho" },
                    responseType: 'blob',
                    success: function (response) {
                        var blob = new Blob([response], { type: 'application/pdf' });

                        // Crear una URL del objeto Blob
                        var url = URL.createObjectURL(blob);

                        // Abrir una nueva pestaña del navegador con el archivo PDF
                        window.open(url);
                    },
                    error: function (error) {
                        console.log(error);
                    }
                });


            } else {
                Swal.fire({
                    title: "No se han seleccionado empleados",
                    icon: "warning",
                });
            }

        }



    </script>
    @*<script src="ruta/a/FileSaver.js"></script>
    <script>
        function generarReporte() {
            if (empleadosSeleccionados.length > 0) {
                $.ajax({
                    url: '/Reporte/GenerarReporteEmpleados',
                    type: 'POST',
                    data: { empleados: empleadosSeleccionados },
                    responseType: 'blob',
                    success: function (response) {
                        var blob = new Blob([response]);
                        saveAs(blob, 'reporte.pdf');
                    },
                    error: function (error) {
                        console.log(error);
                    }
                });
            } else {
                Swal.fire({
                    title: "No se han seleccionado empleados",
                    icon: "warning",
                });
            }
        }
    </script>*@


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Registrar empleado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="col-12 col-md-8">
                    <!-- Nombre -->
                <div class="form-group">
                    <label for="Nombre">Nombre</label>
                    <input type="text" class="form-control" id="Nombre" placeholder="Nombre">
                </div>
            </div>
            <div class="col-12 col-md-4">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="FechaNacimiento">Fecha de nacimiento</label>
                    <input type="date" class="form-control" id="FechaNacimiento" placeholder="Fecha de nacimiento">
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-8">
                    <!-- Nombre -->
                <div class="form-group">
                    <label for="Correo">Correo</label>
                    <input type="email" class="form-control" id="Correo" placeholder="Correo">
                </div>
            </div>
            <div class="col-12 col-md-4">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="telefono">Telefono</label>
                    <input type="text" class="form-control" id="telefono" placeholder="Número de Telefono">
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="direccion">Dirección</label>
                    <input type="text" class="form-control" id="direccion" placeholder="Dirección">
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="sede">Sedes</label>
                    <select id="sede" class="form-select form-control">
                        <option value="0">Seleccione una sede</option>
                        @foreach (Sede sede in ViewBag.Sedes)
                        {
                            <option value="@sede.Id">@sede.Nombre</option>
                        }
                    </select>
                </div>
                
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="tipo_documento">Tipo documento</label>
                    <select id="tipo_documento" class="form-select form-control">
                        @* DUI, DPI, CIC, DNI *@
                        <option value="0">Seleccione un tipo de documento</option>
                        <option value="DUI">DUI</option>
                        <option value="DPI">DPI</option>
                        <option value="CIC">CIC</option>
                        <option value="DNI">DNI</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="numero_documento">Número documento</label>
                    <input type="text" class="form-control" id="numero_documento" placeholder="Número de documento">
                </div>
            </div>

        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="tipo_contrato">Tipo contratación</label>
                    <select id="tipo_contrato" class="form-select form-control">
                        <option value="0">Seleccione </option>
                        <option value="permanente">Permanente</option>
                        <option value="eventual">Eventual</option>
                    </select>
                </div>
                
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="cargo_contrato">Cargo</label>
                    <select id="cargo_contrato" class="form-select form-control">
                        <option value="0">Seleccione un cargo</option>
                        <option value="gerente">Gerente</option>
                        <option value="administrador">Administrador</option>
                        <option value="cajero">Cajero</option>
                        <option value="limpieza">Limpieza</option>
                        <option value="seguridad">Seguridad</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="fecha_inicio_contrato">Fecha de inicio</label>
                    <input type="datetime-local" class="form-control" id="fecha_inicio_contrato">
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Cerrar <i class="fas fa-times"></i>
            </button>
            <button type="button" class="btn btn-primary" onclick="guardarEmpleado()">
                Guardar <i class="fas fa-save"></i>
            </button>
      </div>
    </div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="editarModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Registrar empleado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="col-12 col-md-8">
                    <!-- Nombre -->
                <div class="form-group">
                    <label for="editar_Nombre">Nombre</label>
                    <input type="text" class="form-control" id="editar_Nombre" placeholder="Nombre">
                </div>
            </div>
            <div class="col-12 col-md-4">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="editar_FechaNacimiento">Fecha de nacimiento</label>
                    <input type="date" class="form-control" id="editar_FechaNacimiento" placeholder="Fecha de nacimiento">
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-8">
                    <!-- Nombre -->
                <div class="form-group">
                    <label for="editar_Correo">Correo</label>
                    <input type="email" class="form-control" id="editar_Correo" placeholder="Correo">
                </div>
            </div>
            <div class="col-12 col-md-4">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="editar_telefono">Telefono</label>
                    <input type="text" class="form-control" id="editar_telefono" placeholder="Número de Telefono">
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="editar_direccion">Dirección</label>
                    <input type="text" class="form-control" id="editar_direccion" placeholder="Dirección">
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="editar_sede">Sedes</label>
                    <select id="editar_sede" class="form-select form-control">
                        <option value="0">Seleccione una sede</option>
                        @foreach (Sede sede in ViewBag.Sedes)
                        {
                            <option value="@sede.Id">@sede.Nombre</option>
                        }
                    </select>
                </div>
                
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="editar_tipo_documento">Tipo documento</label>
                    <select id="editar_tipo_documento" class="form-select form-control">
                        @* DUI, DPI, CIC, DNI *@
                        <option value="0">Seleccione un tipo de documento</option>
                        <option value="DUI">DUI</option>
                        <option value="DPI">DPI</option>
                        <option value="CIC">CIC</option>
                        <option value="DNI">DNI</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="editar_numero_documento">Número documento</label>
                    <input type="text" class="form-control" id="editar_numero_documento" placeholder="Número de documento">
                </div>
            </div>

        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="editar_tipo_contrato">Tipo contratación</label>
                    <select id="editar_tipo_contrato" class="form-select form-control">
                        <option value="0">Seleccione </option>
                        <option value="permanente">Permanente</option>
                        <option value="eventual">Eventual</option>
                    </select>
                </div>
                
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="editar_cargo_contrato">Cargo</label>
                    <select id="editar_cargo_contrato" class="form-select form-control">
                        <option value="0">Seleccione un cargo</option>
                        <option value="gerente">Gerente</option>
                        <option value="administrador">Administrador</option>
                        <option value="cajero">Cajero</option>
                        <option value="limpieza">Limpieza</option>
                        <option value="seguridad">Seguridad</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="editar_fecha_inicio_contrato">Fecha de inicio</label>
                    <input type="datetime-local" class="form-control" id="editar_fecha_inicio_contrato">
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
            <input type="hidden" id="editar_id_empleado" />
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Cerrar <i class="fas fa-times"></i>
            </button>
            <button type="button" class="btn btn-primary" onclick="editarGuardarEmpleado()">
                Guardar <i class="fas fa-save"></i>
            </button>
      </div>
    </div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="mostrarModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Registrar empleado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="col-12 col-md-8">
                    <!-- Nombre -->
                <div class="form-group">
                    <label for="mostrar_Nombre">Nombre</label>
                    <input type="text" class="form-control" id="mostrar_Nombre" placeholder="Nombre" readonly>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="mostrar_FechaNacimiento">Fecha de nacimiento</label>
                    <input type="date" class="form-control" id="mostrar_FechaNacimiento" placeholder="Fecha de nacimiento" readonly>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-8">
                    <!-- Nombre -->
                <div class="form-group">
                    <label for="mostrar_Correo">Correo</label>
                    <input type="email" class="form-control" id="mostrar_Correo" placeholder="Correo" readonly>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="mostrar_telefono">Telefono</label>
                    <input type="text" class="form-control" id="mostrar_telefono" placeholder="Número de Telefono" readonly>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <!-- Fecha de nacimiento -->
                <div class="form-group">
                    <label for="mostrar_direccion">Dirección</label>
                    <input type="text" class="form-control" id="mostrar_direccion" placeholder="Dirección" readonly>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="mostrar_sede">Sedes</label>
                    <select id="mostrar_sede" class="form-select form-control" disabled>
                        <option value="0">Seleccione una sede</option>
                        @foreach (Sede sede in ViewBag.Sedes)
                        {
                            <option value="@sede.Id">@sede.Nombre</option>
                        }
                    </select>
                </div>
                
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="mostrar_tipo_documento">Tipo documento</label>
                    <select id="mostrar_tipo_documento" class="form-select form-control" disabled>
                        @* DUI, DPI, CIC, DNI *@
                        <option value="0">Seleccione un tipo de documento</option>
                        <option value="DUI">DUI</option>
                        <option value="DPI">DPI</option>
                        <option value="CIC">CIC</option>
                        <option value="DNI">DNI</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="mostrar_numero_documento">Número documento</label>
                    <input type="text" class="form-control" id="mostrar_numero_documento" placeholder="Número de documento" readonly>
                </div>
            </div>

        </div>
        <div class="row mt-3">
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="mostrar_tipo_contrato">Tipo contratación</label>
                    <select id="mostrar_tipo_contrato" class="form-select form-control" disabled>
                        <option value="0">Seleccione </option>
                        <option value="permanente">Permanente</option>
                        <option value="eventual">Eventual</option>
                    </select>
                </div>
                
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="mostrar_cargo_contrato">Cargo</label>
                    <select id="mostrar_cargo_contrato" class="form-select form-control" disabled>
                        <option value="0">Seleccione un cargo</option>
                        <option value="gerente">Gerente</option>
                        <option value="administrador">Administrador</option>
                        <option value="cajero">Cajero</option>
                        <option value="limpieza">Limpieza</option>
                        <option value="seguridad">Seguridad</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="form-group">
                    <label for="mostrar_fecha_inicio_contrato">Fecha de inicio</label>
                    <input type="datetime-local" class="form-control" id="mostrar_fecha_inicio_contrato" readonly>
                </div>
            </div>

        </div>
      </div>
      <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Cerrar <i class="fas fa-times"></i>
            </button>
      </div>
    </div>
  </div>
</div>


</main>


@section Scripts {
    <script>
        const tabla_sedes = $("#tabla_empleados").DataTable({
            "language": {
                "url": "//cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"
            },
            "responsive": true,
            "dom": 'Bfrtip',
            initComplete: function () {
                
                // Clonet thead on tfoot datatable
                $("#tabla_empleados thead tr").clone().appendTo($("#tabla_empleados tfoot"));
            },
            columns: [
                { title: "ID"},
                { title: null },
                { title: "Tipo documento" },
                { title: "Número de documento" },
                { title: "Nombre" },
                { title: "Correo" },
                { 
                    title: "Nacimiento",
                    render: function (data, type, row) {
                        return data.split(' ')[0].split('/')[1] + '/' + data.split(' ')[0].split('/')[0] + '/' + data.split(' ')[0].split('/')[2];
                    }
                },
                { title: "Telefono" },
                { title: "Direccion" },
                { title: "Sede" },
                { title: "CodigoSede", visible: false },
                { title: "Cargo" },
                {
                    render: function (data, type, row) {
                        return `
                            <button class="btn btn-info" onclick='verEmpleado(${row[0]})'>
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-warning" onclick='editarEmpleado(${row[0]})'>
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger" onclick='borrarEmpleado(${row[0]})'>
                                <i class="fas fa-trash"></i>
                            </button>
                        `;
                    }
                }
            ],
            
        });

        function editarEmpleado(id) {
            
            $.ajax({
                url: `/Empleado/obtener/${id}`,
                type: "GET",
                success: function (response) {
                    $("#editar_id_empleado").val(response.id);
                    $("#editar_Nombre").val(response.nombre);
                    $("#editar_FechaNacimiento").val(response.fechaNacimiento.slice(0, 10));
                    $("#editar_Correo").val(response.correo);
                    $("#editar_telefono").val(response.telefono);
                    $("#editar_direccion").val(response.direccion);
                    $("#editar_sede").val(response.sedeId).trigger('change');
                    $("#editar_tipo_documento").val(response.tipoDocumento);
                    $("#editar_numero_documento").val(response.numeroDocumento);
                    $("#editar_tipo_contrato").val(response.tipoContrato);
                    $("#editar_cargo_contrato").val(response.cargo);
                    $("#editar_fecha_inicio_contrato").val(response.fechaInicio);

                },
                error: function (error) {
                    console.log(error);
                }
            });

            const editar_modal = document.getElementById("editarModal");
            const editarModal = new bootstrap.Modal(editar_modal);
            editarModal.show();
        }

         function borrarEmpleado (idEmpleado) {
            Swal.fire({
                title: '¿Estás seguro?',
                text: "¡No podrás revertir esto!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Sí, borrar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        url: `/Empleado/eliminar/${idEmpleado}`,
                        type: "DELETE",
                        success: function (response) {
                            console.log(response);
                            Swal.fire(
                                '¡Borrado!',
                                'El acuerdo ha sido borrado.',
                                'success'
                            )
                            setTimeout(() => {
                                window.location.reload();
                            }, 1000);
                        },
                        error: function (error) {
                            console.log(error);
                        }
                    });
                }
            })

        }

        function verEmpleado(idEmpleado) {
            $.ajax({
                url: `Empleado/Obtener/${idEmpleado}`,
                type: 'GET',
                xhrFields: {
                    withCredentials: true
                },
                success: function (data) {
                    $("#mostrar_tipo_documento").val(data.tipoDocumento);
                    $("#mostrar_numero_documento").val(data.numeroDocumento);
                    $("#mostrar_Nombre").val(data.nombre);
                    $("#mostrar_Correo").val(data.correo);
                    $("#mostrar_FechaNacimiento").val(data.fechaNacimiento.slice(0, 10));
                    $("#mostrar_telefono").val(data.telefono);
                    $("#mostrar_direccion").val(data.direccion);
                    $("#mostrar_sede").val(data.sedeId);
                    $("#mostrar_cargo").val(data.cargo);
                    $("#mostrar_fecha_inicio_contrato").val(data.fechaInicio);
                    $("#mostrarModal").modal("show");
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("Error al mostrar el empleado");
                }
            })
        }

        @* Select2 *@
        $("#filtro_sedes").select2({
            placeholder: "Seleccione una sede",
            language: "es"
        })

        @*  Filtro  *@
        $("#filtro_sedes").on("change", function () {
            if(this.value == 0) {
                tabla_sedes.column(9).search("").draw();
            } else {
                tabla_sedes.column(9).search(this.value).draw();
            }
        })

        @*  Metodos *@
        //   Nombre, FechaNacimiento, Correo, Telefono, Direccion, SedeId, TipoDocumento, NumeroDocumento, TipoContrato, Cargo, FechaInicio
        function guardarEmpleado() {
            const data = {
                Nombre: $("#Nombre").val(),
                FechaNacimiento: $("#FechaNacimiento").val(),
                Correo: $("#Correo").val(),
                Telefono: $("#telefono").val(),
                Direccion: $("#direccion").val(),
                SedeId: $("#sede").val(),
                TipoDocumento: $("#tipo_documento").val(),
                NumeroDocumento: $("#numero_documento").val(),
                TipoContrato: $("#tipo_contrato").val(),
                Cargo: $("#cargo_contrato").val(),
                FechaInicio: $("#fecha_inicio_contrato").val()
            }

            if (data.Nombre == undefined || data.FechaNacimiento == undefined || data.Correo == undefined || data.Telefono == undefined || data.Direccion == undefined || data.SedeId == undefined || data.TipoDocumento == undefined || data.NumeroDocumento == undefined || data.TipoContrato == undefined || data.Cargo == undefined || data.FechaInicio == undefined) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            if (data.Nombre == null || data.FechaNacimiento == null || data.Correo == null || data.Telefono == null || data.Direccion == null || data.SedeId == null || data.TipoDocumento == null || data.NumeroDocumento == null || data.TipoContrato == null || data.Cargo == null || data.FechaInicio == null) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            if (data.Nombre == "" || data.FechaNacimiento == "" || data.Correo == "" || data.Telefono == "" || data.Direccion == "" || data.SedeId == "" || data.TipoDocumento == "" || data.NumeroDocumento == "" || data.TipoContrato == "" || data.Cargo == "" || data.FechaInicio == "") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            if (data.SedeId == 0 || data.TipoDocumento == 0 || data.TipoContrato == 0 || data.Cargo == 0) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            $.ajax({
                url: "/Empleado",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify(data),
                xhrFields: {
                    withCredentials: true
                },
                success: function (data) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Empleado creado correctamente',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    $("#modalEmpleado").modal("hide");
                    setTimeout(() => {
                        window.location.reload();
                    }, 1000);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Error al crear el empleado',
                    })
                }

            })

        }

        function editarGuardarEmpleado() {
            const idEmpleado = $("#editar_id_empleado").val();
            const data = {
                Nombre: $("#editar_Nombre").val(),
                FechaNacimiento: $("#editar_FechaNacimiento").val(),
                Correo: $("#editar_Correo").val(),
                Telefono: $("#editar_telefono").val(),
                Direccion: $("#editar_direccion").val(),
                SedeId: $("#editar_sede").val(),
                TipoDocumento: $("#editar_tipo_documento").val(),
                NumeroDocumento: $("#editar_numero_documento").val(),
                TipoContrato: $("#editar_tipo_contrato").val(),
                Cargo: $("#editar_cargo_contrato").val(),
                FechaInicio: $("#editar_fecha_inicio_contrato").val()
            }
            console.log(data)
            if (data.Nombre == undefined || data.FechaNacimiento == undefined || data.Correo == undefined || data.Telefono == undefined || data.Direccion == undefined || data.SedeId == undefined || data.TipoDocumento == undefined || data.NumeroDocumento == undefined || data.TipoContrato == undefined || data.Cargo == undefined || data.FechaInicio == undefined) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            if (data.Nombre == null || data.FechaNacimiento == null || data.Correo == null || data.Telefono == null || data.Direccion == null || data.SedeId == null || data.TipoDocumento == null || data.NumeroDocumento == null || data.TipoContrato == null || data.Cargo == null || data.FechaInicio == null) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            if (data.Nombre == "" || data.FechaNacimiento == "" || data.Correo == "" || data.Telefono == "" || data.Direccion == "" || data.SedeId == "" || data.TipoDocumento == "" || data.NumeroDocumento == "" || data.TipoContrato == "" || data.Cargo == "" || data.FechaInicio == "") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            if (data.SedeId == 0 || data.TipoDocumento == 0 || data.TipoContrato == 0 || data.Cargo == 0) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Todos los campos son obligatorios',
                })
                return;
            }

            $.ajax({
                url: `/Empleado/Editar/${idEmpleado}`,
                type: "PUT",
                contentType: "application/json",
                data: JSON.stringify(data),
                xhrFields: {
                    withCredentials: true
                },
                success: function (data) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Empleado editado correctamente',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    $("#modalEditarEmpleado").modal("hide");
                    setTimeout(() => {
                        window.location.reload();
                    }, 1000);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Error al editar el empleado',
                    })
                }

            })
        }

    </script>
}